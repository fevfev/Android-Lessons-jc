# üö® Dependency Injection —Å Dagger –∏ Koin

## üì± –í–≤–µ–¥–µ–Ω–∏–µ

–í —ç—Ç–æ–º —É—Ä–æ–∫–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–¥—Ö–æ–¥—ã –∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π **(Dependency Injection, DI)** –≤ Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–≤—É—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫: **Dagger (Hilt) –∏ Koin.**

 > 
 > –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç Dagger Hilt –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –æ—Ç Google –¥–ª—è DI –≤ Android, –∞ Koin –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–æ–µ, —É–¥–æ–±–Ω–æ–µ –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é Kotlin-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ. –û–±–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–æ–ª—É—á–∏–ª–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ –ª–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ Compose-–ø—Ä–æ–µ–∫—Ç—ã.
 > ![JCAr.png](../../images/JCAr.png)

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –ß—Ç–æ —Ç–∞–∫–æ–µ DI?

**Dependency Injection** ‚Äì —ç—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –∫–ª–∞—Å—Å—ã –∏–∑–≤–Ω–µ –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏—Ö –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–æ–≤.
–≠—Ç–æ:

* **–ü–æ–≤—ã—à–∞–µ—Ç –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:** –ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –µ–º—É –Ω—É–∂–Ω–æ.
* **–£–ª—É—á—à–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å:** –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω—è—Ç—å –º–æ–∫–∞–º–∏ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏.
* **–°–Ω–∏–∂–∞–µ—Ç —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –Ω–∞–ø—Ä—è–º—É—é –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞.

## üõ† Dagger/Hilt

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Hilt:**

–í —Ñ–∞–π–ª–µ `build.gradle` –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

````kotlin
// build.gradle (project)
plugins {
    id 'com.google.dagger.hilt.android' version '2.55' apply false
}

// build.gradle (app)
plugins {
    id 'com.google.dagger.hilt.android'
    id 'kotlin-kapt'
}

dependencies {
    implementation "com.google.dagger:hilt-android:2.55"
    kapt "com.google.dagger:hilt-android-compiler:2.55"
    
    // –î–ª—è ViewModel
    implementation 'androidx.hilt:hilt-navigation-compose:1.0.0'
}
````

### 2. –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

````kotlin
@HiltAndroidApp
class MyApplication : Application()

@AndroidEntryPoint
class MainActivity : ComponentActivity() {
    @Inject lateinit var repository: UserRepository
}
````

### 3. –ú–æ–¥—É–ª–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

````kotlin
@Module
@InstallIn(SingletonComponent::class)
object AppModule {
    @Provides
    @Singleton
    fun provideUserRepository(
        api: UserApi,
        db: UserDatabase
    ): UserRepository {
        return UserRepositoryImpl(api, db)
    }
    
    @Provides
    @Singleton
    fun provideUserDatabase(
        @ApplicationContext context: Context
    ): UserDatabase {
        return Room.databaseBuilder(
            context,
            UserDatabase::class.java,
            "user_db"
        ).build()
    }
}
````

### 4. ViewModel —Å Hilt

````kotlin
@HiltViewModel
class UserViewModel @Inject constructor(
    private val repository: UserRepository,
    private val analytics: AnalyticsTracker
) : ViewModel() {
    private val _users = MutableStateFlow<List<User>>(emptyList())
    val users = _users.asStateFlow()
    
    init {
        viewModelScope.launch {
            repository.getUsers()
                .collect { users ->
                    _users.value = users
                }
        }
    }
}
````

## üåü Koin

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

````kotlin
dependencies {
    implementation "io.insert-koin:koin-android:4.0.2"
    implementation "io.insert-koin:koin-androidx-compose:4.0.2"
}
````

### 2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π

````kotlin
val appModule = module {
    single { 
        Room.databaseBuilder(
            androidContext(),
            UserDatabase::class.java,
            "user_db"
        ).build() 
    }
    
    single<UserRepository> { 
        UserRepositoryImpl(
            api = get(),
            db = get()
        ) 
    }
    
    viewModel { 
        UserViewModel(
            repository = get(),
            analytics = get()
        ) 
    }
}
````

### 3. –ó–∞–ø—É—Å–∫ Koin

````kotlin
class MyApplication : Application() {
    override fun onCreate() {
        super.onCreate()
        startKoin {
            androidContext(this@MyApplication)
            modules(appModule)
        }
    }
}
````

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Compose

````kotlin
@Composable
fun UserScreen(
    viewModel: UserViewModel = koinViewModel()
) {
    val users by viewModel.users.collectAsState()
    
    LazyColumn {
        items(users) { user ->
            UserItem(user)
        }
    }
}
````

## üîÑ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Dagger/Hilt –∏ Koin

### Dagger/Hilt

‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

* –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
* –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Google
* –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

* –°–ª–æ–∂–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
* –ö—Ä—É—Ç–∞—è –∫—Ä–∏–≤–∞—è –æ–±—É—á–µ–Ω–∏—è
* –ú–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

### Koin

‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

* –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
* –ß–∏—Å—Ç—ã–π Kotlin DSL
* –õ–µ–≥–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

* –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
* –ú–µ–Ω—å—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
* –ú–µ–Ω—å—à–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üìù –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

### –ó–∞–¥–∞–Ω–∏–µ: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∑–∞–º–µ—Ç–æ–∫

–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º DI:

* [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å Hilt
* [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å Koin
* [ ] –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Room
1. –°–µ—Ç–µ–≤–æ–π —Å–ª–æ–π Retrofit
1. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
1. ViewModel
1. Compose UI

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏

* [ ] –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
* [ ] –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º DI
* [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
* [ ] –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å –∫–æ–¥–∞
* [ ] –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

* [Hilt Documentation](https://developer.android.com/training/dependency-injection/hilt-android)
* [Koin Documentation](https://insert-koin.io/)
* [DI Best Practices](https://developer.android.com/training/dependency-injection/manual)
* [Comparing DI Libraries](https://www.raywenderlich.com/18901098-dependency-injection-with-hilt)

## üé• –í–∏–¥–µ–æ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

[![Watch the video](https://img.youtube.com/vi/yGiCNunSVN8/0.jpg)](https://youtu.be/yGiCNunSVN8?list=PLIh9yLdjK2YeRLnD-gJyVWIq_w-7OMv8r)

[![Watch the video](https://img.youtube.com/vi/LfRX7pt1bbQ/0.jpg)](https://youtu.be/LfRX7pt1bbQ?list=PLXtiZNKIobF5E1JgDaisqnVJfbZeUFYkm)

[![Watch the video](https://img.youtube.com/vi/Mn8WwqbndGg/0.jpg)](https://www.youtube.com/watch?v=Mn8WwqbndGg&t=417s&pp=ygUZREkgRGFnZ2VyIEtvaW4g0LIgQW5kcm9pZA%3D%3D)
[![Watch the video](https://img.youtube.com/vi/_qb87PN7jlI/0.jpg)](https://www.youtube.com/watch?v=_qb87PN7jlI&pp=ygUZREkgRGFnZ2VyIEtvaW4g0LIgQW5kcm9pZA%3D%3D)
