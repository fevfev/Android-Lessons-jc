![Data.png](../../images/Data.png)

## üì± –í–≤–µ–¥–µ–Ω–∏–µ

SharedPreferences - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –º–µ—Ö–∞–Ω–∏–∑–º —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ, –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –Ω–µ–±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

**–û—Å–Ω–æ–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

* –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–º–∞, —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞).
* –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ, –≥–¥–µ –∫–ª—é—á–∏ - —Å—Ç—Ä–æ–∫–∏, –∞ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ (**String, Integer, Boolean, Float, Long**).

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

* –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
* –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –∏–ª–∏ —Ç–∞–±–ª–∏—Ü.

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**

‚Äî –ù–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –∏–ª–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö.  
‚Äî –°–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é. –í–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –¥–æ—Å—Ç—É–ø–µ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `apply()` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏, –∞ `commit()` ‚Äî –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π).

![Preferences DataStore.png](../../images/Preferences%20DataStore.png)
–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–µ–±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏, —á–∏—Å–ª–∞ –∏–ª–∏ –±—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º SharedPreferences. –≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ –ø–∞—Ä –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –∏–¥–µ–∞–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏–ª–∏ –ª—é–±—ã—Ö –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Å—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

SharedPreferences –ø–æ–¥—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Å—Ç—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏, —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞, –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —á–∏—Å–ª–∞, –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –Ω–∞–±–æ—Ä—ã —Å—Ç—Ä–æ–∫.

## üõ† –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

* String (—Å—Ç—Ä–æ–∫–∏)
* Int (—Ü–µ–ª—ã–µ —á–∏—Å–ª–∞)
* Long (–¥–ª–∏–Ω–Ω—ã–µ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞)
* Float (—á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π)
* Boolean (–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è)
* Set<String> (–Ω–∞–±–æ—Ä—ã —Å—Ç—Ä–æ–∫)

### –†–µ–∂–∏–º—ã –¥–æ—Å—Ç—É–ø–∞

````kotlin
Context.MODE_PRIVATE // –¢–æ–ª—å–∫–æ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
Context.MODE_WORLD_READABLE // –£—Å—Ç–∞—Ä–µ–ª
Context.MODE_WORLD_WRITEABLE // –£—Å—Ç–∞—Ä–µ–ª
````

## üí° –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ SharedPreferences

````kotlin
// –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ SharedPreferences
val sharedPref = context.getSharedPreferences("app_settings", Context.MODE_PRIVATE)

// –ò–ª–∏ –∏–∑ Activity
val sharedPref = activity?.getPreferences(Context.MODE_PRIVATE)
````

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

````kotlin
with(sharedPref.edit()) {
    putString("user_name", "John Doe")
    putInt("age", 25)
    putBoolean("is_logged_in", true)
    putFloat("balance", 100.50f)
    // apply() - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    apply()
    // –∏–ª–∏ commit() - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    // commit()
}
````

### –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

````kotlin
val userName = sharedPref.getString("user_name", "") // –≤—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
val age = sharedPref.getInt("age", 0)
val isLoggedIn = sharedPref.getBoolean("is_logged_in", false)
val balance = sharedPref.getFloat("balance", 0f)
````

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä —Å—á–µ—Ç—á–∏–∫–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ SharedPreferences

![SharedPreferences.gif](..\SharedPreferences.gif)

````kotlin
@Composable
fun SharedPreferencesCounter() {
    val context = LocalContext.current
    val sharedPref = remember { 
        context.getSharedPreferences("counter_prefs", Context.MODE_PRIVATE) 
    }

    var counter by remember {
        mutableStateOf(sharedPref.getInt("counter", 0))
    }

    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(16.dp),
        verticalArrangement = Arrangement.Center,
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        Text(
            text = "–°—á–µ—Ç—á–∏–∫: $counter",
            style = MaterialTheme.typography.headlineMedium
        )
        
        Spacer(modifier = Modifier.height(16.dp))
        
        Row(
            horizontalArrangement = Arrangement.spacedBy(8.dp)
        ) {
            Button(onClick = {
                counter++
                sharedPref.edit().putInt("counter", counter).apply()
            }) {
                Text("–£–≤–µ–ª–∏—á–∏—Ç—å")
            }
            
            Button(onClick = {
                counter = 0
                sharedPref.edit().putInt("counter", 0).apply()
            }) {
                Text("–°–±—Ä–æ—Å–∏—Ç—å")
            }
        }
    }
}
````

### –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

````kotlin
@Composable
fun AppSettings() {
    val context = LocalContext.current
    val sharedPref = remember { 
        context.getSharedPreferences("settings", Context.MODE_PRIVATE) 
    }
    
    var isDarkMode by remember { 
        mutableStateOf(sharedPref.getBoolean("dark_mode", false)) 
    }
    
    var notificationsEnabled by remember { 
        mutableStateOf(sharedPref.getBoolean("notifications", true)) 
    }

    Column(modifier = Modifier.padding(16.dp)) {
        // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã
        Row(
            modifier = Modifier.fillMaxWidth(),
            horizontalArrangement = Arrangement.SpaceBetween,
            verticalAlignment = Alignment.CenterVertically
        ) {
            Text("–¢—ë–º–Ω–∞—è —Ç–µ–º–∞")
            Switch(
                checked = isDarkMode,
                onCheckedChange = { checked ->
                    isDarkMode = checked
                    sharedPref.edit().putBoolean("dark_mode", checked).apply()
                }
            )
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        Row(
            modifier = Modifier.fillMaxWidth(),
            horizontalArrangement = Arrangement.SpaceBetween,
            verticalAlignment = Alignment.CenterVertically
        ) {
            Text("–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è")
            Switch(
                checked = notificationsEnabled,
                onCheckedChange = { checked ->
                    notificationsEnabled = checked
                    sharedPref.edit().putBoolean("notifications", checked).apply()
                }
            )
        }
    }
}
````

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. –¢–æ–ª—å–∫–æ –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
1. –ù–µ—Ç —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
1. –í–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é
1. –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –Ω–∞–±–æ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö
1. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ `apply()` –≤–º–µ—Å—Ç–æ `commit()`
1. –ò–∑–±–µ–≥–∞–π—Ç–µ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
1. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DataStore –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

* [SharedPreferences Documentation](https://developer.android.com/training/data-storage/shared-preferences)
* [Best Practices for SharedPreferences](https://developer.android.com/topic/performance/shared-preferences)

## üé• –í–∏–¥–µ–æ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

[![Watch the video](https://img.youtube.com/vi/7KDUl-k96Og/0.jpg)](https://www.youtube.com/watch?v=7KDUl-k96Og&pp=ygUZYW5kcm9pZCBzaGFyZWRwcmVmZXJlbmNlcw%3D%3D)

[![Watch the video](https://img.youtube.com/vi/rJ3uwqko9Ew/0.jpg)](https://www.youtube.com/watch?v=rJ3uwqko9Ew&pp=ygUZYW5kcm9pZCBzaGFyZWRwcmVmZXJlbmNlcw%3D%3D)
