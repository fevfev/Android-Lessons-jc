## üì± –í–≤–µ–¥–µ–Ω–∏–µ

File Storage - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ Android, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, –æ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –¥–æ –º–µ–¥–∏–∞–∫–æ–Ω—Ç–µ–Ω—Ç–∞.

![roomlogo.png](..\roomlogo.png)

## üóÑÔ∏è –¢–∏–ø—ã —Ö—Ä–∞–Ω–∏–ª–∏—â

![rroomdb.png](..\rroomdb.png)

### 1. –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Internal Storage)

* –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
* –£–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
* –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –æ–±—ä–µ–º

### 2. –í–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (External Storage)

* –î–æ—Å—Ç—É–ø–Ω–æ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º
* –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ (SD-–∫–∞—Ä—Ç–∞)
* –¢—Ä–µ–±—É–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
* –ë–æ–ª—å—à–∏–π –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö

## üí° –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### –†–∞–±–æ—Ç–∞ —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º

````kotlin
class FileManager(private val context: Context) {
    // –ó–∞–ø–∏—Å—å —Ñ–∞–π–ª–∞
    fun writeFile(fileName: String, content: String) {
        context.openFileOutput(fileName, Context.MODE_PRIVATE).use { stream ->
            stream.write(content.toByteArray())
        }
    }

    // –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
    fun readFile(fileName: String): String {
        return context.openFileInput(fileName).bufferedReader().use { reader ->
            reader.readText()
        }
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
    fun fileExists(fileName: String): Boolean {
        val file = context.getFileStreamPath(fileName)
        return file.exists()
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
    fun deleteFile(fileName: String): Boolean {
        return context.deleteFile(fileName)
    }
}
````

### –†–∞–±–æ—Ç–∞ —Å –≤–Ω–µ—à–Ω–∏–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º

````kotlin
class ExternalStorageManager {
    fun isExternalStorageWritable(): Boolean {
        return Environment.getExternalStorageState() == Environment.MEDIA_MOUNTED
    }

    fun writeExternalFile(context: Context, fileName: String, content: String) {
        if (isExternalStorageWritable()) {
            val file = File(
                context.getExternalFilesDir(null),
                fileName
            )
            file.writeText(content)
        }
    }

    fun readExternalFile(context: Context, fileName: String): String {
        val file = File(context.getExternalFilesDir(null), fileName)
        return file.readText()
    }
}
````

## üì± –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–º–µ—Ç–æ–∫

````kotlin
@Composable
fun NoteManagerScreen() {
    var noteText by remember { mutableStateOf("") }
    var savedNotes by remember { mutableStateOf<List<String>>(emptyList()) }
    val context = LocalContext.current
    val fileManager = remember { FileManager(context) }

    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(16.dp)
    ) {
        // –ü–æ–ª–µ –≤–≤–æ–¥–∞
        OutlinedTextField(
            value = noteText,
            onValueChange = { noteText = it },
            label = { Text("–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏") },
            modifier = Modifier.fillMaxWidth()
        )

        Spacer(modifier = Modifier.height(8.dp))

        // –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        Row(
            modifier = Modifier.fillMaxWidth(),
            horizontalArrangement = Arrangement.SpaceBetween
        ) {
            Button(onClick = {
                val fileName = "note_${System.currentTimeMillis()}.txt"
                fileManager.writeFile(fileName, noteText)
                noteText = ""
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫
            }) {
                Text("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å")
            }

            Button(onClick = {
                // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∑–∞–º–µ—Ç–æ–∫
            }) {
                Text("–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫")
            }
        }

        Spacer(modifier = Modifier.height(16.dp))

        // –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫
        LazyColumn {
            items(savedNotes) { note ->
                NoteItem(note = note)
                Spacer(modifier = Modifier.height(8.dp))
            }
        }
    }
}

@Composable
fun NoteItem(note: String) {
    Card(
        modifier = Modifier.fillMaxWidth(),
        elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)
    ) {
        Text(
            text = note,
            modifier = Modifier.padding(16.dp)
        )
    }
}
````

## üîç –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

* –ì–∏–±–∫–æ—Å—Ç—å –≤ —Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª—é–±—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
* –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–∞–º
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

* –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏
* –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
* –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
* –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

* [Android Storage Documentation](https://developer.android.com/training/data-storage)
* [File Storage Guide](https://developer.android.com/training/data-storage/files)
* [Storage Best Practices](https://developer.android.com/topic/performance/storage)

## üé• –í–∏–¥–µ–æ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

[![Watch the video](https://img.youtube.com/vi/iNqBw6btaPI/0.jpg)](https://youtu.be/iNqBw6btaPI?list=PLIh9yLdjK2YeRLnD-gJyVWIq_w-7OMv8r)

[![Watch the video](https://img.youtube.com/vi/jcO6p5TlcGs/0.jpg)](https://www.youtube.com/watch?v=jcO6p5TlcGs&pp=ygUVYW5kcm9pZCBGaWxlIFN0b3JhZ2Ug)
